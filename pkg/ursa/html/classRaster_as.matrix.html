<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Convert raster image to a matrix</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="file:///C:/Software/R/doc/html/R.css" />
</head><body>

<table width="100%" summary="page for as.matrix"><tr><td>as.matrix</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>
Convert raster image to a matrix
</h2>

<h3>Description</h3>

<p><code>as.matrix(coords=TRUE)</code> prepares a list from the first band of <code>rmapRaster</code>, which is suitable as input parameter for functions <code><a href="../../graphics/html/image.html">image</a></code>, <code><a href="../../graphics/html/contour.html">contour</a></code> and <code><a href="../../graphics/html/filled.contour.html">filled.contour</a></code>.
</p>


<h3>Usage</h3>

<pre>
## S3 method for class 'rmapRaster'
as.matrix(x, ...)
## S3 method for class 'rmapRaster'
x[[i]]

</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>x</code></td>
<td>

<p>Object of class <code>rmapRaster</code>
</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>Set of argumetns, which are recognized via their names (using <a href="../../base/html/regex.html">regular expressions</a>) and classes.
</p>

<dl>
<dt><code>(coord(s)*|crd|^$)</code></dt><dd>
<p>Logical If <code>TRUE</code> then <code><a href="../../base/html/list.html">list</a></code> is created with <code>x</code>, <code>y</code>, <code>z</code> components, where component <code>$z</code> contains matrix, components <code>$x</code> and <code>$y</code> are coordinates for elements if matrix. 
</p>
</dd>
</dl>

</td></tr>
<tr valign="top"><td><code>i</code></td>
<td>

<p>Positive integer or character of lentg. If integer, then band index. If character, then band name. If missing, then first band (value <code>1L</code>) is used.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Item <code>colortable</code> is mainly for internal usage, e. g., for mapping. Item <code>proj</code> is useful for convertion back to <code>rmapRaster</code> object by calling <code><a href="../../rmap/html/rmap.as.html">as.rmap</a></code> function.
</p>
<p>Extract operator <code>x[[i]]</code> is a wrapper for <code>as.matrix(x[i],coords=TRUE)</code>
</p>


<h3>Value</h3>

<p>Depending of argument <code>coords</code>.
</p>
<p>If <code>coords=FALSE</code>, then it is a two-dimensional matrix <code>c(samples*lines, bands)</code>, <a href="../../base/html/class.html">unclassed</a> from <code>rmapValue</code> class.
</p>
<p>If <code>coords=TRUE</code>, then it is a list:
</p>
<table summary="R valueblock">
<tr valign="top"><td><code>x</code></td>
<td>
<p>Numeric. Midpoints of cells on horizontal axis</p>
</td></tr>
<tr valign="top"><td><code>y</code></td>
<td>
<p>Numeric. Midpoints of cells on vertical axis</p>
</td></tr>
<tr valign="top"><td><code>z</code></td>
<td>
<p>Numeric. Matrix of values</p>
</td></tr>
<tr valign="top"><td><code>attr(*,&quot;proj&quot;)</code></td>
<td>
<p>PROJ.4 string for grid, defined by <code>x</code> and <code>y</code></p>
</td></tr>
<tr valign="top"><td><code>attr(*,&quot;colortable&quot;)</code></td>
<td>
<p>Optional. Object of class <code><a href="../../rmap/html/classColorTable.html">rmapColorTable</a></code>. Missing if raster has no color table.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Nikita Platonov <a href="mailto:platonov@sevin.ru">platonov@sevin.ru</a>
</p>


<h3>Examples</h3>

<pre>
session.grid(NULL)
a &lt;- rmap.dummy(nband=3,min=0,max=100)
a &lt;- a[a&gt;=20 &amp; a&lt;=80]
ignorevalue(a) &lt;- 121
str(rmap.value(a[2]))
str(as.matrix(a[2]))
b1 &lt;- a[[2]]
str(b1)
## Not run: 
image(b1,asp=1)
## End(Not run)
b2 &lt;- as.matrix(a[2:3],coords=TRUE)
print(c('theSame?'=identical(b1,b2)))
a2 &lt;- as.rmap(b2)
res &lt;- c(src=a[2],exported_then_imported=a2,diff=a[2]-a2)
print(res)
</pre>


</body></html>
